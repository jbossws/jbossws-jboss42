<?xml version="1.0" encoding="UTF-8"?>

<!-- ====================================================================== -->
<!--                                                                        -->
<!--  JBoss, the OpenSource J2EE webOS                                      -->
<!--                                                                        -->
<!--  Distributable under LGPL license.                                     -->
<!--  See terms of license at http://www.gnu.org.                           -->
<!--                                                                        -->
<!-- ====================================================================== -->

<!-- $Id$ -->

<project>

  <!-- ================================================================== -->
  <!-- Deployment  JBoss42                                                -->
  <!-- ================================================================== -->
  
  <!-- Deploy jbossws to jboss42 -->
  <target name="deploy" depends="jbws42-jars,remove-jbossws,remove-jbwsri" description="Deploy jbossws">

    <fail message="Not available: ${jboss42.available.file}" unless="jboss42.available"/>

    <copy todir="${jboss42.home}/client" overwrite="true">
      <fileset dir="${core.dir}/output/lib">
        <include name="jboss-jaxrpc.jar"/>
        <include name="jboss-jaxws.jar"/>
        <include name="jboss-saaj.jar"/>
        <include name="jbossws-client.jar"/>
      </fileset>
      <fileset dir="${core.thirdparty.dir}">
        <include name="jaxb-api.jar"/>
        <include name="jaxb-impl.jar"/>
        <include name="jaxb-xjc.jar"/>
        <include name="wsdl4j.jar"/>
        <include name="jbossws-wsconsume-impl.jar"/>
      </fileset>
    </copy>
    <copy todir="${jboss42.home}/lib" overwrite="true">
      <fileset dir="${spi.dir}/output/lib">
        <include name="jbossws-spi.jar"/>
      </fileset>
    </copy>
    <copy todir="${jboss42.home}/server/${jboss.server.instance}/lib" overwrite="true">
      <fileset dir="${core.dir}/output/lib">
        <include name="jboss-jaxrpc.jar"/>
        <include name="jboss-jaxws.jar"/>
        <include name="jboss-saaj.jar"/>
      </fileset>
    </copy>
    <mkdir dir="${jboss42.home}/server/${jboss.server.instance}/deploy/jbossws.sar"/>
    <unjar dest="${jboss42.home}/server/${jboss.server.instance}/deploy/jbossws.sar" src="${jbws42.output.lib.dir}/jbossws42.sar"/>
  </target>
    
  <!-- Remove jbossws from jboss42 -->
  <target name="remove-jbossws" depends="prepare" description="Remove jbossws">

    <fail message="Not available: ${jboss42.available.file}" unless="jboss42.available"/>

    <delete>
      <fileset dir="${jboss42.home}/client">
        <include name="jboss-jaxrpc.jar"/>
        <include name="jboss-jaxws.jar"/>
        <include name="jboss-saaj.jar"/>
        <include name="jbossws-client.jar"/>
        <include name="wsdl4j.jar"/>
        <include name="jbossws-wsconsume-impl.jar"/>
      </fileset>
      <fileset dir="${jboss42.home}/lib">
        <include name="jbossws-integration.jar"/>
        <include name="jbossws-spi.jar"/>
      </fileset>
      <fileset dir="${jboss42.home}/server/${jboss.server.instance}/lib">
        <include name="jboss-jaxrpc.jar"/>
        <include name="jboss-jaxws.jar"/>
        <include name="jboss-saaj.jar"/>
      </fileset>
    </delete>
    <delete dir="${jboss42.home}/server/${jboss.server.instance}/deploy/jbossws.sar"/>
  </target>
  
  <!-- Remove jbossws/sunri from jboss42 -->
  <target name="remove-jbwsri" depends="prepare" description="Remove jbossws/sunri">

    <delete dir="${jboss42.home}/server/${jboss.server.instance}/deploy/jbosswsri.sar"/>
  </target>
  
</project>
